name: Deploy to Server

on:
  workflow_run:
    workflows:
      - Build and Push Docker Images to GHCR
    types:
      - completed

jobs:
  deploy:
    runs-on: self-hosted

    steps:
      - name: Pull and Run Latest Images
        run: |
          docker pull ghcr.io/japolyak/tutorilla-api:latest
          docker pull ghcr.io/japolyak/tutorilla-bot:latest
          docker pull ghcr.io/japolyak/tutorilla-web-app:latest